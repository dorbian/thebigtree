<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Forest Management</title>
    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="stylesheet" href="/static/overlay/overlay.css">
  </head>
  <body>
    <button class="overlay-exit" id="overlayExit">Exit overlay</button>
    <div class="login-screen" id="loginView">
      <div class="login-card">
        <div class="login-title">Forest Management</div>
        <div class="login-sub">Enter your API key to manage the forest.</div>
        <label for="apiKeyLogin">API key</label>
        <input id="apiKeyLogin" placeholder="Paste /auth token">
        <button id="loginBtn">Login</button>
        <div class="status" id="loginStatus">Ready.</div>
      </div>
    </div>

    <div class="app-shell hidden" id="appView">
      <aside class="sidebar">
        <div class="sidebar-body">
          <div class="nav-block">
            <div class="brand">Forest Management</div>
            <div class="brand-user hidden" id="brandUser">
              <img id="brandUserIcon" alt="" class="hidden">
              <svg viewBox="0 0 24 24" aria-hidden="true" id="brandUserFallback">
                <path d="M12 4a4 4 0 1 1-4 4 4 4 0 0 1 4-4zm0 10c3.31 0 6 1.34 6 3v3H6v-3c0-1.66 2.69-3 6-3z"/>
              </svg>
              <span id="brandUserName"></span>
            </div>
          </div>

          <div class="nav-block">
            <div class="nav-title">Home</div>
            <div class="menu-item" id="menuDashboard" tabindex="0">
              <span class="menu-label">Dashboard</span>
            </div>
          </div>

          <div class="nav-block">
            <div class="nav-title">Bingo</div>
            <div class="menu-item" id="menuBingo" tabindex="0">
              <span class="menu-label">Manager</span>
              <div class="menu-actions">
                <button class="menu-refresh" id="menuBingoRefresh" title="Refresh games" aria-label="Refresh games">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M12 5a7 7 0 1 1-6.65 9H3a9 9 0 1 0 2.64-6.36L3 6v6h6l-2.55-2.55A7 7 0 0 1 12 5z"/>
                  </svg>
                </button>
                <button class="menu-refresh" id="menuCreateGame" title="New game" aria-label="New game">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M11 5h2v14h-2zM5 11h14v2H5z"/>
                  </svg>
                </button>
              </div>
            </div>
            <div class="menu-sub" id="menuGames"></div>
            <div class="hidden" id="menuCreateGamePlaceholder"></div>
          </div>

          <div class="nav-block">
            <div class="nav-title">Cardgames</div>
            <div class="menu-item" id="menuTarotLinks" tabindex="0"><span class="menu-label">Tarot Sessions</span></div>
            <div class="menu-item" id="menuCardgameBlackjack" tabindex="0"><span class="menu-label">Blackjack Sessions</span></div>
            <div class="menu-item" id="menuCardgamePoker" tabindex="0"><span class="menu-label">Poker Sessions</span></div>
            <div class="menu-item" id="menuCardgameHighlow" tabindex="0"><span class="menu-label">High/Low Sessions</span></div>
            <div class="menu-item" id="menuTarotDecks" tabindex="0"><span class="menu-label">Deck Editor</span></div>
          </div>

          <div class="nav-block">
            <div class="nav-title">Discord</div>
            <div class="menu-item" id="menuContests" tabindex="0"><span class="menu-label">Contests</span></div>
          </div>

          <div class="nav-block">
            <div class="nav-title">Administration</div>
            <div class="menu-icon-grid">
              <div class="menu-icon-group">
                <div class="menu-icon-label">Media</div>
                <button class="menu-icon" id="menuMedia" title="Media management" aria-label="Media management">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M4 5h16a1 1 0 0 1 1 1v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1zm0 2v10h15a0 0 0 0 0 0 0V7H4zm3 8 3-4 3 3 2-2 4 5H7z"/>
                  </svg>
                </button>
                <button class="menu-icon" id="menuGallery" title="Image uploader" aria-label="Image uploader">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M4 6h16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2zm0 2v8h16V8H4zm3 6 3-4 3 3 2-2 3 4H7z"/>
                  </svg>
                </button>
                <button class="menu-icon" id="menuCalendar" title="Forest Calendar" aria-label="Forest Calendar">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M7 2h2v2h6V2h2v2h3a1 1 0 0 1 1 1v15a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a1 1 0 0 1 1-1h4V2zm-3 6v12h16V8H4zm2 2h4v4H6v-4z"/>
                  </svg>
                </button>
              </div>
              <div class="menu-icon-group">
                <div class="menu-icon-label">Users</div>
                <button class="menu-icon" id="menuArtists" title="Artist index" aria-label="Artist index">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M12 4a4 4 0 1 1-4 4 4 4 0 0 1 4-4zm0 10c3.31 0 6 1.34 6 3v3H6v-3c0-1.66 2.69-3 6-3z"/>
                  </svg>
                </button>
                <button class="menu-icon" id="menuAuthRoles" title="Auth roles" aria-label="Auth roles">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M12 2a5 5 0 0 1 5 5v3h2a1 1 0 0 1 1 1v9a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-9a1 1 0 0 1 1-1h2V7a5 5 0 0 1 5-5zm-3 8h6V7a3 3 0 0 0-6 0v3z"/>
                  </svg>
                </button>
              </div>
              <div class="menu-icon-group">
                <div class="menu-icon-label">System</div>
                <button class="menu-icon" id="menuAuthKeys" title="Auth keys" aria-label="Auth keys">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M12 1a7 7 0 0 0-4.3 12.5l-2.2 2.2V19h3.3l1.2-1.2h1.4l1.2-1.2h1.5l1.6-1.6A7 7 0 1 0 12 1zm0 4a3 3 0 1 1-3 3 3 3 0 0 1 3-3z"/>
                  </svg>
                </button>
                <button class="menu-icon" id="menuAuthTemp" title="Temporary access" aria-label="Temporary access">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M12 2a6 6 0 0 1 6 6v3h2a1 1 0 0 1 1 1v7a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-7a1 1 0 0 1 1-1h2V8a6 6 0 0 1 6-6zm-4 9h8V8a4 4 0 1 0-8 0v3z"/>
                  </svg>
                </button>
                <button class="menu-icon" id="menuOverlayToggle" title="Toggle overlay mode" aria-label="Toggle overlay mode">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h10v2H4z"/>
                  </svg>
                </button>
              </div>
            </div>
            <input type="checkbox" id="overlayMode" class="hidden">
          </div>

          <div class="nav-block">
            <div class="nav-title">Status</div>
            <div class="status-bar status" id="status">
              <span class="status-dot" id="statusDot" aria-hidden="true"></span>
              <span id="statusText">Idle</span>
              <span class="status-time" id="statusTime">--:--</span>
            </div>
          </div>
        </div>
      </aside>
      <main class="content">
      <div class="grid">
        <section class="panel dashboard hidden" style="animation-delay:.02s" id="dashboardPanel">
          <h2>Forest Dashboard</h2>
          <p class="muted">Welcome to the forest control room. This is a quick start and reference for the bot and site.</p>
          <div class="dashboard-readme" style="margin-top:12px">
            <div class="dash-toc">
              <strong>Table of contents</strong>
              <ul>
                <li><a href="#dash-overview">Welcome & System Overview</a></li>
                <li><a href="#dash-auth">Authentication & Access</a></li>
                <li><a href="#dash-downloads">Downloadable Software & Installations</a></li>
                <li><a href="#dash-commands">Discord Bot Commands</a></li>
                <li><a href="#dash-tools">Web Dashboard Tools</a></li>
                <li><a href="#dash-workflows">Workflows</a></li>
                <li><a href="#dash-gallery">Gallery & Archival Flow</a></li>
                <li><a href="#dash-troubleshoot">Troubleshooting</a></li>
                <li><a href="#dash-credits">Credits & Acknowledgements</a></li>
              </ul>
            </div>

            <details class="dash-section" id="dash-overview" open>
              <summary>Welcome & System Overview</summary>
              <div class="dash-section-body">
                <div class="dash-blocks">
                  <div class="dash-block">
                    <div class="dash-label">Overview</div>
                    <p>Forest is a coordinated system of Discord commands, web tools, and overlays used to run games, rituals, and archives.</p>
                    <ul class="dash-list">
                      <li>Discord Bot</li>
                      <li>Web Dashboard</li>
                      <li>OBS Overlay</li>
                      <li>Media & Gallery System</li>
                    </ul>
                  </div>
                  <div class="dash-block">
                    <div class="dash-label">When to use this</div>
                    <p>Use this page for onboarding, daily operations, and troubleshooting during live events.</p>
                  </div>
                  <div class="dash-block">
                    <div class="dash-label">Links</div>
                    <div class="dash-links">
                      <a href="/overlay">Web Dashboard</a>
                      <a href="/tarot/gallery" target="_blank" rel="noreferrer">Forest Gallery</a>
                      <a href="/tarot/calendar" target="_blank" rel="noreferrer">Forest Calendar</a>
                      <a href="/tarot/overlay" target="_blank" rel="noreferrer">Tarot Overlay</a>
                    </div>
                  </div>
                </div>
              </div>
            </details>

            <details class="dash-section" id="dash-auth" open>
              <summary>Authentication & Access</summary>
              <div class="dash-section-body">
                <div class="dash-blocks">
                  <div class="dash-block">
                    <div class="dash-label">Overview</div>
                    <p>Authentication protects admin tools. Tokens are short-lived and tied to your Discord role permissions.</p>
                  </div>
                  <div class="dash-block">
                    <div class="dash-label">When to use this</div>
                    <p>Use this whenever tools are locked, permissions are missing, or a token expires.</p>
                  </div>
                  <div class="dash-block">
                    <div class="dash-label">Links</div>
                    <div class="dash-links">
                      <a href="/overlay">Dashboard Login</a>
                    </div>
                  </div>
                </div>
                <h3>How authentication works</h3>
                <ul class="dash-list">
                  <li><span class="cmd">/auth</span> generates a 24-hour token.</li>
                  <li>Tokens unlock tools based on role permissions.</li>
                  <li>Expired tokens must be regenerated.</li>
                </ul>
                <h3>Step-by-step</h3>
                <ol class="dash-list">
                  <li>Run <span class="cmd">/auth</span> in Discord.</li>
                  <li>Copy the generated token.</li>
                  <li>Paste the token into the Dashboard auth field.</li>
                  <li>Tools unlock based on role permissions.</li>
                </ol>
                <div class="dash-note">Security warning: never share tokens. Treat them like passwords.</div>
                <p><strong>Who can generate tokens:</strong> only members with approved roles or permissions.</p>
                <p><strong>When a token expires:</strong> tools lock until a new token is generated.</p>
              </div>
            </details>

            <details class="dash-section" id="dash-downloads">
              <summary>Downloadable Software & Installations</summary>
              <div class="dash-section-body">
                <div class="dash-blocks">
                  <div class="dash-block">
                    <div class="dash-label">Overview</div>
                    <p>Use OBS to display overlays for live Tarot and Bingo sessions.</p>
                  </div>
                  <div class="dash-block">
                    <div class="dash-label">When to use this</div>
                    <p>Required for streaming, screen capture, and in-scene overlays.</p>
                  </div>
                  <div class="dash-block">
                    <div class="dash-label">Links</div>
                    <div class="dash-links">
                      <a href="{{OBS_DOWNLOAD_URL}}" target="_blank" rel="noreferrer">Download OBS Studio</a>
                    </div>
                  </div>
                </div>
                <h3>Overlay Mode (OBS)</h3>
                <ol class="dash-list">
                  <li>Install OBS Studio.</li>
                  <li>Add a Browser Source.</li>
                  <li>Paste the overlay URL.</li>
                  <li>Set resolution and FPS to match your stream.</li>
                  <li>Enable “Refresh browser when scene becomes active”.</li>
                </ol>
              </div>
            </details>

            <details class="dash-section" id="dash-commands">
              <summary>Discord Bot Commands (Task-Based)</summary>
              <div class="dash-section-body">
                <div class="dash-blocks">
                  <div class="dash-block">
                    <div class="dash-label">Overview</div>
                    <p>Commands are grouped by task to support live operations.</p>
                  </div>
                  <div class="dash-block">
                    <div class="dash-label">When to use this</div>
                    <p>Use this during live events and when training new operators.</p>
                  </div>
                  <div class="dash-block">
                    <div class="dash-label">Links</div>
                    <div class="dash-links">
                      <a href="#dash-workflows">Workflows</a>
                    </div>
                  </div>
                </div>
                <h3>Bingo Commands</h3>
                <p>Used to run live Bingo games.</p>
                <ul class="dash-list">
                  <li><span class="cmd">/bingo</span> — start a game</li>
                  <li><span class="cmd">/call</span> — call the next number</li>
                  <li><span class="cmd">/bingo-stage</span> — advance game stage</li>
                  <li><span class="cmd">/bingo-end</span> — end the game</li>
                  <li><span class="cmd">/buycard</span> or <span class="cmd">/buycards</span> — sell cards</li>
                </ul>
                <p><strong>Typical Bingo flow:</strong> start game → sell cards → call numbers → manage claims → end game.</p>

                <h3>Tarot Commands</h3>
                <p>Used during tarot readings and rituals.</p>
                <ul class="dash-list">
                  <li><span class="cmd">/tarot_start</span> — open a session</li>
                  <li><span class="cmd">/tarot_draw</span> — draw cards</li>
                  <li><span class="cmd">/tarot_flip</span> — reveal cards</li>
                  <li><span class="cmd">/tarot_end</span> — close session and archive</li>
                  <li><span class="cmd">/tarot_stream</span> — generate overlay link</li>
                </ul>
                <p><strong>Session vs overlay:</strong> session view is operator control, overlay view is for streaming.</p>

                <h3>Contest Commands</h3>
                <p>Use contests to collect entries that move into the Gallery.</p>
                <ul class="dash-list">
                  <li><span class="cmd">/contest</span> — start a contest</li>
                  <li><span class="cmd">/contest_stop</span> — end the contest</li>
                </ul>

                <h3>Permissions & Admin Commands</h3>
                <ul class="dash-list">
                  <li><span class="cmd">/permissions list</span> — inspect current access</li>
                  <li><span class="cmd">/permissions refresh</span> — sync permissions</li>
                </ul>
                <p>Roles define access. Users inherit from roles. Refresh after role updates.</p>
              </div>
            </details>

            <details class="dash-section" id="dash-tools">
              <summary>Web Dashboard Tools</summary>
              <div class="dash-section-body">
                <div class="dash-blocks">
                  <div class="dash-block">
                    <div class="dash-label">Overview</div>
                    <p>Each tool is purpose-built; use the right one to avoid unintended changes.</p>
                  </div>
                  <div class="dash-block">
                    <div class="dash-label">When to use this</div>
                    <p>Use this when deciding where to make a change or troubleshoot behavior.</p>
                  </div>
                  <div class="dash-block">
                    <div class="dash-label">Links</div>
                    <div class="dash-links">
                      <a href="/overlay">Dashboard</a>
                    </div>
                  </div>
                </div>
                <div class="dash-tool">
                  <div class="dash-tool-title">Dashboard</div>
                  <p>For onboarding, reference, and troubleshooting. Does not change data.</p>
                </div>
                <div class="dash-tool">
                  <div class="dash-tool-title">Tarot Sessions</div>
                  <p>Run tarot sessions, open player/priestess views. Does not edit deck content.</p>
                </div>
                <div class="dash-tool">
                  <div class="dash-tool-title">Deck Editor</div>
                  <p>Create and maintain decks and cards. Changes are permanent. Does not alter active sessions until selected.</p>
                </div>
                <div class="dash-tool">
                  <div class="dash-tool-title">Bingo Manager</div>
                  <p>Run live Bingo games, manage claims and stage changes. Does not create Discord channels.</p>
                </div>
                <div class="dash-tool">
                  <div class="dash-tool-title">Overlay Mode</div>
                  <p>OBS-friendly layout for streaming. Does not change game state.</p>
                </div>
                <div class="dash-tool">
                  <div class="dash-tool-title">Admin Tools</div>
                  <p>Auth roles/keys, media library, artist index, Forest Calendar. Use with care.</p>
                </div>
              </div>
            </details>

            <details class="dash-section" id="dash-workflows">
              <summary>Workflows</summary>
              <div class="dash-section-body">
                <h3>Tarot Workflow</h3>
                <ul class="dash-list">
                  <li><strong>Why:</strong> ensures sessions are structured and archived.</li>
                  <li><strong>Steps:</strong> create session → draw → reveal → narrate → finish.</li>
                  <li><strong>Expect:</strong> cards appear in the spread and meaning panel updates.</li>
                  <li><strong>Common mistakes:</strong> forgetting to reveal, using wrong deck.</li>
                </ul>

                <h3>Deck Editor Workflow</h3>
                <ul class="dash-list">
                  <li><strong>Why:</strong> maintain a clean, reusable deck library.</li>
                  <li><strong>Steps:</strong> pick deck → edit card → set art → save.</li>
                  <li><strong>Expect:</strong> previews update immediately; changes persist.</li>
                  <li><strong>Common mistakes:</strong> editing the wrong deck, missing back art.</li>
                </ul>

                <h3>Bingo Workflow</h3>
                <ul class="dash-list">
                  <li><strong>Why:</strong> run a fair, synchronized live game.</li>
                  <li><strong>Steps:</strong> create game → sell cards → call numbers → manage claims → close.</li>
                  <li><strong>Expect:</strong> called numbers update across views.</li>
                  <li><strong>Common mistakes:</strong> calling before game start, ignoring pending claims.</li>
                </ul>
              </div>
            </details>

            <details class="dash-section" id="dash-gallery">
              <summary>Gallery & Archival Flow</summary>
              <div class="dash-section-body">
                <div class="dash-blocks">
                  <div class="dash-block">
                    <div class="dash-label">Overview</div>
                    <p>When games end, their artwork is preserved in the Forest Gallery as a shrine to contributors.</p>
                  </div>
                  <div class="dash-block">
                    <div class="dash-label">When to use this</div>
                    <p>Use this to verify artist attribution and manage visibility.</p>
                  </div>
                  <div class="dash-block">
                    <div class="dash-label">Links</div>
                    <div class="dash-links">
                      <a href="/tarot/gallery" target="_blank" rel="noreferrer">Forest Gallery</a>
                    </div>
                  </div>
                </div>
                <p>Artist names and links are preserved. The gallery exists to honor work, not rank it.</p>
              </div>
            </details>

            <details class="dash-section" id="dash-troubleshoot">
              <summary>Troubleshooting (Decision Guide)</summary>
              <div class="dash-section-body">
                <h3>Authentication Issues</h3>
                <div class="dash-issue">
                  <p><strong>Symptom:</strong> Tools locked or login fails.</p>
                  <p><strong>Likely cause:</strong> Token expired or missing permissions.</p>
                  <p><strong>Action:</strong> Run <span class="cmd">/auth</span> again and re-login.</p>
                </div>
                <div class="dash-issue">
                  <p><strong>Symptom:</strong> Overlay is blank.</p>
                  <p><strong>Likely cause:</strong> Missing token or wrong URL.</p>
                  <p><strong>Action:</strong> Re-open overlay link, ensure auth is valid.</p>
                </div>

                <h3>Sync Issues</h3>
                <div class="dash-issue">
                  <p><strong>Symptom:</strong> Cards not updating.</p>
                  <p><strong>Likely cause:</strong> Client stale state.</p>
                  <p><strong>Action:</strong> Refresh the view and re-open the session.</p>
                </div>
                <div class="dash-issue">
                  <p><strong>Symptom:</strong> Bingo numbers desynced.</p>
                  <p><strong>Likely cause:</strong> Calls not announced or stale game ID.</p>
                  <p><strong>Action:</strong> Refresh Bingo Manager and verify active game.</p>
                </div>

                <h3>Media Issues</h3>
                <div class="dash-issue">
                  <p><strong>Symptom:</strong> Images not loading.</p>
                  <p><strong>Likely cause:</strong> Missing media file or bad URL.</p>
                  <p><strong>Action:</strong> Re-open Media Library and re-select.</p>
                </div>
                <div class="dash-issue">
                  <p><strong>Symptom:</strong> Wrong image used.</p>
                  <p><strong>Likely cause:</strong> Incorrect selection.</p>
                  <p><strong>Action:</strong> Re-select image and save the deck/card.</p>
                </div>
              </div>
            </details>

            <details class="dash-section" id="dash-credits">
              <summary>Credits & Acknowledgements</summary>
              <div class="dash-section-body">
                <p>Credits recognize artists, moderators, maintainers, and contributors who sustain the Forest.</p>
                <ul class="dash-list">
                  <li>Yamaneko Chi</li>
                  <li>Asgorath White</li>
                  <li>Malady La'naiserie</li>
                  <li>Labreska Vaalkihar</li>
                  <li>Levi Anvunin/Cesare</li>
                </ul>
              </div>
            </details>
          </div>
        </section>
          <section class="panel" style="animation-delay:.05s" id="bingoPanel">
            <h2>Bingo Manager</h2>

            <div class="bingo-section bingo-control">
              <h3>Game Control</h3>
              <div class="bingo-status-display" id="bGameStatusDisplay">
                <div class="bingo-status-label" id="bGameStatusText">Waiting to Start</div>
                <div class="bingo-status-meta" id="bGameStatusMeta">No game selected.</div>
                <div class="status-badge" id="bGameStatus">No game</div>
              </div>
              <div class="bingo-primary-row">
                <button class="btn-ghost" id="bStart">Start game</button>
                <button class="btn-ghost" id="bRoll">Call next number</button>
                <button class="btn-ghost" id="bAdvanceStage">Advance stage</button>
                <button class="btn-ghost" id="bRefresh">Refresh</button>
                <button class="btn-ghost danger-btn" id="bCloseGame">Close game</button>
              </div>
              <div class="bingo-feedback">
                <div class="bingo-last-action" id="bLastAction">Last action: -</div>
                <div class="bingo-history" id="bHistory">
                  <div class="muted">No history yet.</div>
                </div>
              </div>
              <div class="status" id="bingoStatus">No game selected.</div>
            </div>

            <div class="section-divider"></div>

            <div class="bingo-section">
              <h3>Players &amp; Cards</h3>
              <div class="empty-state" id="bOwnersEmpty">
                <div class="muted">No players yet. Refresh to pull current owners.</div>
                <button class="btn-ghost" id="bOwnersRefresh">Refresh players</button>
              </div>
              <div class="list" id="bOwners"></div>
            </div>

            <div class="section-divider"></div>

            <div class="bingo-section">
              <h3>Game State &amp; History</h3>
              <div class="bingo-summary" id="bSummary">
                <div>Title: <span id="bTitleVal">No title</span></div>
                <div>Header: <span id="bHeaderVal">No header</span></div>
                <div>Stage: <span id="bStageVal">No stage</span></div>
                <div>Pot: <span id="bPotVal">No pot</span></div>
              </div>
              <div class="bingo-called" id="bCalled">No numbers called yet.</div>
              <div class="bingo-called-grid" id="bCalledGrid"></div>
              <div class="bingo-card" id="bCard">
                <div class="bingo-header" id="bCardHeader"></div>
                <div class="bingo-grid" id="bCardGrid"></div>
              </div>
            </div>

            <div class="section-divider"></div>

            <details class="bingo-advanced" id="bingoAdvanced">
              <summary>Advanced</summary>
              <div class="bingo-advanced-body">
                <div class="row">
                  <div>
                    <label>Game ID</label>
                    <div id="bGameId" class="status">No game selected.</div>
                  </div>
                  <div>
                    <label for="bCountsPot">
                      <input type="checkbox" id="bCountsPot" checked>
                      Counts toward pot
                    </label>
                  </div>
                  <div>
                    <label for="bSeedPotAmount">Seed pot</label>
                    <input id="bSeedPotAmount" type="number" value="0" min="0">
                  </div>
                  <div>
                    <label>&nbsp;</label>
                    <button class="btn-ghost" id="bSeedPotApply">Seed pot</button>
                  </div>
                </div>
                <div class="row">
                  <div>
                    <label for="bOwner"><span class="req">*</span> Owner name</label>
                    <input id="bOwner" placeholder="Player name">
                  </div>
                  <div>
                    <label for="bQty">Quantity</label>
                    <input id="bQty" type="number" value="1" min="1" max="10">
                  </div>
                  <div>
                    <label>&nbsp;</label>
                    <button id="bBuy" class="btn-ghost">Buy</button>
                  </div>
                </div>
              </div>
            </details>

            <details class="bingo-advanced" id="bingoAdmin">
              <summary>Admin Tools</summary>
              <div class="bingo-advanced-body">
                <div class="row">
                  <div>
                    <label for="bOwnerId">Discord ID</label>
                    <input id="bOwnerId" placeholder="optional">
                  </div>
                  <div>
                    <label>&nbsp;</label>
                    <button class="btn-ghost" id="bViewOwner">View tickets</button>
                  </div>
                </div>
                <div class="row">
                  <div>
                    <label>Announce calls</label>
                    <div class="bingo-announce">
                      <input type="checkbox" id="bAnnounceToggle">
                      <span class="status-badge" id="bAnnounceBadge">Off</span>
                    </div>
                  </div>
                </div>
                <div class="list" id="bClaims">No claims yet.</div>
              </div>
            </details>
          </section>

        <section class="panel" style="animation-delay:.1s" id="tarotLinksPanel">
          <h2>Tarot Sessions</h2>
          <p>Open the player, priestess, or overlay view.</p>
          <div class="row">
            <div>
              <label for="tSessionSelect">Existing sessions</label>
              <select id="tSessionSelect"></select>
            </div>
            <div>
              <label>&nbsp;</label>
              <button id="tSessionRefresh" class="menu-refresh" title="Refresh sessions" aria-label="Refresh sessions">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M12 5a7 7 0 1 1-6.65 9H3a9 9 0 1 0 2.64-6.36L3 6v6h6l-2.55-2.55A7 7 0 0 1 12 5z"/>
                </svg>
              </button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button id="tCreateSession">New session</button>
            </div>
          </div>
          <div class="row">
            <div>
              <label for="tJoinCode">Join code</label>
              <input id="tJoinCode" placeholder="e.g. AB12CD">
            </div>
            <div>
              <label for="tPriestessToken">Priestess token</label>
              <input id="tPriestessToken" placeholder="token (for priestess)">
            </div>
          </div>
          <div class="row">
            <div>
              <label>&nbsp;</label>
              <button id="tOpenPlayer">Open player</button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button id="tOpenPriestess">Open priestess</button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button id="tOpenOverlay">Open overlay</button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button class="btn-ghost" id="tCloseSession">Close session</button>
            </div>
          </div>
          <div class="row links">
            <div>
              <span class="pill">Links</span>
              <div id="tLink">No join code entered.</div>
            </div>
          </div>
          <h3>Tarot Games</h3>
          <p>Create and manage tarot sessions.</p>
          <div class="status hidden" id="tSpreadNote">
            Spread = the card layout for the reading. Single: one card. Tree: Root/Trunk/Canopy. Cross: Past/Present/Future.
          </div>
        </section>

        <section class="panel hidden" style="animation-delay:.1s" id="cardgameBlackjackPanel">
          <h2>Blackjack Sessions</h2>
          <p>Create and manage blackjack sessions.</p>
          <div class="row">
            <div>
              <label for="bjSessionSelect">Existing sessions</label>
              <select id="bjSessionSelect"></select>
            </div>
            <div>
              <label>&nbsp;</label>
              <button id="bjSessionRefresh" class="menu-refresh" title="Refresh sessions" aria-label="Refresh sessions">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M12 5a7 7 0 1 1-6.65 9H3a9 9 0 1 0 2.64-6.36L3 6v6h6l-2.55-2.55A7 7 0 0 1 12 5z"/>
                </svg>
              </button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button id="bjCreateSession">New session</button>
            </div>
          </div>
          <div class="row">
            <div>
              <label for="bjPot">Gil pot</label>
              <input id="bjPot" placeholder="0">
            </div>
            <div>
              <label for="bjJoinCode">Join code</label>
              <input id="bjJoinCode" placeholder="e.g. AB12CD">
            </div>
            <div>
              <label for="bjPriestessToken">Priestess token</label>
              <input id="bjPriestessToken" placeholder="token (for priestess)">
            </div>
          </div>
          <div class="row">
            <div>
              <label>&nbsp;</label>
              <button id="bjOpenPlayer">Open player</button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button id="bjOpenPriestess">Open priestess</button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button class="btn-ghost" id="bjStartSession">Start session</button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button class="btn-ghost" id="bjFinishSession">Finish session</button>
            </div>
          </div>
          <div class="row links">
            <div>
              <span class="pill">Links</span>
              <div id="bjLink">No join code entered.</div>
            </div>
          </div>
          <div class="status" id="bjStatus">Ready.</div>
        </section>

        <section class="panel hidden" style="animation-delay:.1s" id="cardgamePokerPanel">
          <h2>Poker Sessions</h2>
          <p>Create and manage poker sessions.</p>
          <div class="row">
            <div>
              <label for="pkSessionSelect">Existing sessions</label>
              <select id="pkSessionSelect"></select>
            </div>
            <div>
              <label>&nbsp;</label>
              <button id="pkSessionRefresh" class="menu-refresh" title="Refresh sessions" aria-label="Refresh sessions">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M12 5a7 7 0 1 1-6.65 9H3a9 9 0 1 0 2.64-6.36L3 6v6h6l-2.55-2.55A7 7 0 0 1 12 5z"/>
                </svg>
              </button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button id="pkCreateSession">New session</button>
            </div>
          </div>
          <div class="row">
            <div>
              <label for="pkPot">Gil pot</label>
              <input id="pkPot" placeholder="0">
            </div>
            <div>
              <label for="pkJoinCode">Join code</label>
              <input id="pkJoinCode" placeholder="e.g. AB12CD">
            </div>
            <div>
              <label for="pkPriestessToken">Priestess token</label>
              <input id="pkPriestessToken" placeholder="token (for priestess)">
            </div>
          </div>
          <div class="row">
            <div>
              <label>&nbsp;</label>
              <button id="pkOpenPlayer">Open player</button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button id="pkOpenPriestess">Open priestess</button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button class="btn-ghost" id="pkStartSession">Start session</button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button class="btn-ghost" id="pkFinishSession">Finish session</button>
            </div>
          </div>
          <div class="row links">
            <div>
              <span class="pill">Links</span>
              <div id="pkLink">No join code entered.</div>
            </div>
          </div>
          <div class="status" id="pkStatus">Ready.</div>
        </section>

        <section class="panel hidden" style="animation-delay:.1s" id="cardgameHighlowPanel">
          <h2>High/Low Sessions</h2>
          <p>Create and manage high/low sessions.</p>
          <div class="row">
            <div>
              <label for="hlSessionSelect">Existing sessions</label>
              <select id="hlSessionSelect"></select>
            </div>
            <div>
              <label>&nbsp;</label>
              <button id="hlSessionRefresh" class="menu-refresh" title="Refresh sessions" aria-label="Refresh sessions">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M12 5a7 7 0 1 1-6.65 9H3a9 9 0 1 0 2.64-6.36L3 6v6h6l-2.55-2.55A7 7 0 0 1 12 5z"/>
                </svg>
              </button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button id="hlCreateSession">New session</button>
            </div>
          </div>
          <div class="row">
            <div>
              <label for="hlPot">Gil pot</label>
              <input id="hlPot" placeholder="0">
            </div>
            <div>
              <label for="hlJoinCode">Join code</label>
              <input id="hlJoinCode" placeholder="e.g. AB12CD">
            </div>
            <div>
              <label for="hlPriestessToken">Priestess token</label>
              <input id="hlPriestessToken" placeholder="token (for priestess)">
            </div>
          </div>
          <div class="row">
            <div>
              <label>&nbsp;</label>
              <button id="hlOpenPlayer">Open player</button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button id="hlOpenPriestess">Open priestess</button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button class="btn-ghost" id="hlStartSession">Start session</button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button class="btn-ghost" id="hlFinishSession">Finish session</button>
            </div>
          </div>
          <div class="row links">
            <div>
              <span class="pill">Links</span>
              <div id="hlLink">No join code entered.</div>
            </div>
          </div>
          <div class="status" id="hlStatus">Ready.</div>
        </section>

        <section class="panel hidden" style="animation-delay:.1s" id="tarotDecksPanel">
          <h2>Deck Editor</h2>
          <div class="context-header">
            <div>
              <div class="context-path" id="taContextPath">Deck Editor / Forest / No card selected</div>
              <div class="context-meta" id="taContextMeta">Pick a card to edit.</div>
            </div>
            <div class="context-meta" id="taContextDeck"></div>
          </div>
          <div class="row">
            <div>
              <label for="taDeck">Deck</label>
              <select id="taDeck"></select>
            </div>
            <div>
              <label>&nbsp;</label>
              <div class="icon-group">
                <button class="btn-ghost icon-btn" id="taAddDeck" title="Add deck">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M11 5h2v14h-2zM5 11h14v2H5z"/>
                  </svg>
                </button>
                <button class="btn-ghost icon-btn" id="taEditDeck" title="Edit deck">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M4 15.5V20h4.5L19 9.5l-4.5-4.5L4 15.5zm16.4-9.9a1.5 1.5 0 0 0 0-2.1l-1.9-1.9a1.5 1.5 0 0 0-2.1 0l-1.5 1.5 4.5 4.5 1.5-1.5z"/>
                  </svg>
                </button>
                <button class="btn-ghost icon-btn danger-action" id="taDeleteDeck" title="Delete deck">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M6 7h12v2H6zM9 9h2v9H9zm4 0h2v9h-2zM8 5h8l-1-1h-6l-1 1z"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
          <div class="list" id="taDeckList">No deck loaded.</div>
          <div class="status" id="taDeckStatus">Pick a deck to begin.</div>

          <div class="section-divider"></div>
          <h3>Card Editor</h3>
          <div class="deck-editor-grid">
            <div class="deck-editor-column">
              <h4>Identity</h4>
              <div class="row">
                <div>
                  <label for="taCardId">Card ID</label>
                  <input id="taCardId" placeholder="candlecap_sprite">
                </div>
              </div>
              <div class="row">
                <div>
                  <label for="taCardName">Name</label>
                  <input id="taCardName" placeholder="Candlecap Sprite">
                </div>
              </div>
              <div class="row">
                <div>
                  <label for="taCardSuit">Suit</label>
                  <input id="taCardSuit" list="taSuitList" placeholder="Major">
                  <datalist id="taSuitList">
                    <option value="Major"></option>
                    <option value="Wands"></option>
                    <option value="Cups"></option>
                    <option value="Swords"></option>
                    <option value="Pentacles"></option>
                    <option value="Hearts"></option>
                    <option value="Spades"></option>
                    <option value="Clubs"></option>
                    <option value="Diamonds"></option>
                  </datalist>
                </div>
                <div>
                  <label for="taCardNumber">Number</label>
                  <input id="taCardNumber" list="taNumberList" placeholder="XIV or 14">
                  <datalist id="taNumberList"></datalist>
                </div>
              </div>
              <div class="row">
                <div>
                  <label for="taCardTags">Tags</label>
                  <input id="taCardTags" placeholder="mischief,curiosity">
                </div>
              </div>
            </div>
            <div class="deck-editor-column">
              <h4>Meaning</h4>
              <div class="row">
                <div>
                  <label for="taCardFlavor">Flavor text</label>
                  <textarea id="taCardFlavor" rows="2" placeholder="Short flavor line for the card..."></textarea>
                </div>
              </div>
              <div class="row">
                <div>
                  <label for="taCardUpright">Upright</label>
                  <textarea id="taCardUpright"></textarea>
                </div>
              </div>
              <div class="row">
                <div>
                  <label for="taCardReversed">Reversed</label>
                  <textarea id="taCardReversed"></textarea>
                </div>
              </div>
            </div>
            <div class="deck-editor-column">
              <h4>Meta</h4>
              <div class="row">
                <div>
                  <label>Theme weights</label>
                  <div class="theme-grid" id="taCardThemes"></div>
                  <div class="muted" id="taCardThemesHint">Select a suit to see theme weights.</div>
                </div>
              </div>
              <div class="row">
                <div>
                  <label>Suit info</label>
                  <div class="list" id="taSuitInfo">Pick a suit to see details.</div>
                </div>
              </div>
              <div class="row">
                <div>
                  <label>Number info</label>
                  <div class="list" id="taNumberInfo">Pick a number to see details.</div>
                </div>
              </div>
              <div class="row">
                <div>
                  <label>Card image</label>
                  <button class="btn-ghost icon-btn" id="taCardLibrary" title="Choose from library">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                      <path d="M4 5h16a1 1 0 0 1 1 1v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1zm0 2v10h15a0 0 0 0 0 0 0V7H4zm3 8 3-4 3 3 2-2 4 5H7z"/>
                    </svg>
                  </button>
                </div>
              </div>
              <input id="taCardArtist" type="hidden">
              <div class="row">
                <div>
                  <label>Card preview</label>
                  <div class="preview-grid">
                    <div class="preview-card" id="taFrontPreview"><span class="preview-label">Front</span></div>
                    <div class="preview-card" id="taBackPreview"><span class="preview-label">Back</span></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div>
              <label>&nbsp;</label>
              <button id="taSaveCard" class="btn-primary">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V7l-4-4zM12 19a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm3-10H5V5h10v4z"/>
                </svg>
                Save card
              </button>
            </div>
          </div>
        </section>

        <section class="panel hidden" style="animation-delay:.1s" id="contestPanel">
          <h2>Discord</h2>
          <div class="row">
            <div>
              <label>&nbsp;</label>
              <button class="btn-ghost" id="contestRefresh">Refresh contests</button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button class="btn-ghost" id="contestCreateChannelOpen">Create contest channel</button>
            </div>
          </div>
          <div class="muted" id="contestHelp">Create and run contests for a channel. Missing data will show an alert with a quick fix.</div>
          <div class="section-divider"></div>
          <h3>Create Contest</h3>
          <div class="row">
            <div>
              <label for="contestChannel">Channel</label>
              <select id="contestChannel"></select>
            </div>
            <div>
              <label>&nbsp;</label>
              <button class="menu-refresh" id="contestChannelRefresh" title="Refresh channels" aria-label="Refresh channels">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M12 5a7 7 0 1 1-6.65 9H3a9 9 0 1 0 2.64-6.36L3 6v6h6l-2.55-2.55A7 7 0 0 1 12 5z"/>
                </svg>
              </button>
            </div>
            <div>
              <label for="contestTitle">Title</label>
              <input id="contestTitle" placeholder="Elfoween Costume Contest">
            </div>
            <div>
              <label for="contestDeadline">Deadline</label>
              <input id="contestDeadline" placeholder="2025-10-31 23:59">
            </div>
          </div>
          <div class="row">
            <div>
              <label for="contestDescription">Description</label>
              <textarea id="contestDescription" placeholder="Post your entry as an attachment. Most :TreeCone: wins!"></textarea>
            </div>
            <div>
              <label for="contestRules">Rules</label>
              <textarea id="contestRules" placeholder="Leave empty for defaults."></textarea>
            </div>
          </div>
          <div class="row">
            <div>
              <label for="contestEmoji">Vote emoji</label>
              <input id="contestEmoji" placeholder=":TreeCone:">
            </div>
            <div>
              <label>&nbsp;</label>
              <button id="contestCreate">Create contest</button>
            </div>
          </div>
          <div class="status" id="contestCreateStatus">Select a channel to create a contest.</div>
          <h3>Contest overview</h3>
          <div class="contest-grid">
            <div>
              <div class="list-header">Active</div>
              <div class="list" id="contestAllList">No contests loaded.</div>
            </div>
            <div>
              <div class="list-header">Ended</div>
              <div class="list" id="contestEndedList">No ended contests yet.</div>
            </div>
          </div>
          <div class="section-divider"></div>
          <h3>TarotCards</h3>
          <div class="row">
            <div>
              <label for="tarotClaimsDeck">Deck</label>
              <select id="tarotClaimsDeck"></select>
            </div>
            <div>
              <label for="tarotClaimsChannel">Channel</label>
              <select id="tarotClaimsChannel"></select>
            </div>
            <div>
              <label for="tarotClaimsLimit">Claim limit</label>
              <input id="tarotClaimsLimit" type="number" value="2" min="1" max="10">
            </div>
          </div>
          <div class="row">
            <div>
              <label>&nbsp;</label>
              <button class="btn-ghost" id="tarotClaimsRefresh">Refresh lists</button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button id="tarotClaimsPost">Post TarotCards board</button>
            </div>
          </div>
          <div class="status" id="tarotClaimsStatus">Pick a deck and channel to post.</div>
        </section>
        <section class="panel hidden" style="animation-delay:.1s" id="mediaPanel">
          <h2>Media Library</h2>
          <p>Upload, review, and manage images used across the Forest.</p>
          <div class="library-layout">
            <div>
                <div class="media-tabs">
                  <button class="media-tab active" id="mediaTabUploadBtn" data-tab="upload">Upload</button>
                  <button class="media-tab" id="mediaTabEditBtn" data-tab="edit" disabled title="Select an image to edit">Edit</button>
                </div>
              <div class="media-tab-panel active" id="mediaTabUpload">
                <div class="library-section-title">Upload</div>
                <div class="upload-drop" id="mediaUploadDrop" role="button" tabindex="0">
                  <div class="upload-drop-title" id="mediaUploadDropTitle">Drag &amp; drop an image</div>
                  <div class="upload-drop-meta" id="mediaUploadDropMeta">PNG, JPG, GIF, WEBP</div>
                  <div class="upload-drop-cta" id="mediaUploadDropCta">or click to choose</div>
                </div>
                <input id="mediaUploadFile" type="file" accept="image/*" class="hidden">
                <div class="row">
                  <div>
                    <label for="mediaUploadTitleInput">Title</label>
                    <input id="mediaUploadTitleInput" placeholder="Image title">
                  </div>
                  <div>
                    <label for="mediaUploadArtist">Artist</label>
                    <select id="mediaUploadArtist"></select>
                  </div>
                  <div>
                    <label for="mediaUploadOriginType">Origin type</label>
                    <select id="mediaUploadOriginType">
                      <option value="Artifact">Artifact</option>
                      <option value="Rite">Rite</option>
                      <option value="Contest">Contest</option>
                      <option value="Tarot">Tarot</option>
                      <option value="Bingo">Bingo</option>
                      <option value="Gallery">Gallery</option>
                    </select>
                  </div>
                  <div>
                    <label for="mediaUploadOriginLabel">Origin label</label>
                    <input id="mediaUploadOriginLabel" placeholder="Offered during...">
                  </div>
                </div>
                <div class="row">
                  <div>
                    <label>&nbsp;</label>
                    <button id="mediaUploadUpload" disabled>Upload</button>
                  </div>
                </div>
                  <div class="status" id="mediaUploadStatus">Upload idle.</div>
              </div>
                <div class="media-tab-panel" id="mediaTabEdit">
                  <div class="library-section-title">Edit</div>
                  <div class="media-empty" id="mediaEditEmpty">Select an image to edit.</div>
                  <div class="media-edit-card hidden" id="mediaEditCard">
                    <div class="media-edit-preview" id="mediaEditPreview"></div>
                    <div class="row">
                    <div>
                      <label>&nbsp;</label>
                      <button class="btn-ghost" id="mediaEditCopy" disabled>Copy URL</button>
                    </div>
                    <div>
                      <label>&nbsp;</label>
                      <button class="btn-ghost" id="mediaEditOpen" disabled>Open</button>
                    </div>
                    <div>
                      <label>&nbsp;</label>
                      <button class="btn-ghost btn-danger" id="mediaEditDelete" disabled>Delete</button>
                    </div>
                      <div>
                        <label>&nbsp;</label>
                        <button class="btn-ghost" id="mediaEditHide" disabled>Hide in gallery</button>
                      </div>
                    </div>
                    <div class="row">
                      <div>
                        <label>&nbsp;</label>
                        <button class="btn-ghost" id="mediaEditClear" disabled>Clear selection</button>
                      </div>
                    </div>
                    <div class="row">
                      <div>
                        <label>Selected</label>
                        <div class="status" id="mediaEditIdentity">-</div>
                      </div>
                    <div>
                      <label>Artist</label>
                      <div class="status" id="mediaEditArtistDisplay">-</div>
                    </div>
                    <div>
                      <label>Origin</label>
                      <div class="status" id="mediaEditOriginDisplay">-</div>
                    </div>
                  </div>
                  <div class="media-edit-meta" id="mediaEditMeta"></div>
                  <div class="row">
                    <div>
                      <label for="mediaEditFilename">Filename</label>
                      <input id="mediaEditFilename" readonly>
                    </div>
                    <div>
                      <label for="mediaEditTitle">Title</label>
                      <input id="mediaEditTitle" placeholder="Image title">
                    </div>
                    <div>
                      <label for="mediaEditArtist">Artist</label>
                      <select id="mediaEditArtist"></select>
                    </div>
                    <div>
                      <label for="mediaEditOriginType">Origin type</label>
                      <select id="mediaEditOriginType">
                        <option value="Artifact">Artifact</option>
                        <option value="Rite">Rite</option>
                        <option value="Contest">Contest</option>
                        <option value="Tarot">Tarot</option>
                        <option value="Bingo">Bingo</option>
                        <option value="Gallery">Gallery</option>
                      </select>
                    </div>
                    <div>
                      <label for="mediaEditOriginLabel">Origin label</label>
                      <input id="mediaEditOriginLabel" placeholder="Offered during...">
                    </div>
                  </div>
                    <div class="row">
                      <div>
                        <label>&nbsp;</label>
                        <button id="mediaEditSave" disabled>Save changes</button>
                      </div>
                    </div>
                    <div class="status" id="mediaEditStatus">Select an image to edit.</div>
                  </div>
                </div>
                <div class="section-divider"></div>
                <details class="media-filters-wrap" id="mediaFiltersWrap">
                  <summary id="mediaFiltersSummary">Filters (0 active)</summary>
                  <div class="media-filters">
                    <select id="mediaFilterArtist">
                      <option value="">All artists</option>
                    </select>
                    <select id="mediaFilterOriginType">
                      <option value="">All origins</option>
                      <option value="Artifact">Artifact</option>
                      <option value="Rite">Rite</option>
                      <option value="Contest">Contest</option>
                      <option value="Tarot">Tarot</option>
                      <option value="Bingo">Bingo</option>
                      <option value="Gallery">Gallery</option>
                    </select>
                    <select id="mediaFilterLabel">
                      <option value="any">Any label</option>
                      <option value="has">Has label</option>
                      <option value="none">Untagged</option>
                    </select>
                    <button class="btn-ghost" id="mediaFilterClear" type="button">Clear filters</button>
                  </div>
                </details>
              </div>
              <div>
                <div class="media-toolbar">
                  <div class="library-section-title">Existing media</div>
                  <button class="btn-ghost icon-btn icon-btn--small" id="mediaLibraryRefresh" title="Refresh" aria-label="Refresh">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                      <path d="M12 5a7 7 0 1 1-6.65 9H3a9 9 0 1 0 2.64-6.36L3 6v6h6l-2.55-2.55A7 7 0 0 1 12 5z"/>
                    </svg>
                  </button>
                  <input id="mediaToolbarSearch" placeholder="Search title, artist, label">
                  <select id="mediaToolbarSort">
                    <option value="new">Newest first</option>
                    <option value="old">Oldest first</option>
                    <option value="title">Title A-Z</option>
                    <option value="artist">Artist A-Z</option>
                  </select>
                  <div class="media-selection" id="mediaSelectionIndicator">0 selected</div>
                </div>
                <div class="bulk-bar" id="mediaBulkBar">
                  <span class="count" id="mediaBulkCount">0 selected</span>
                  <button class="btn-ghost btn-danger" id="mediaBulkDelete">Delete</button>
                  <button class="btn-ghost" id="mediaBulkHide">Hide</button>
                <button class="btn-ghost" id="mediaBulkShow">Show</button>
                <select id="mediaBulkArtist"></select>
                <button id="mediaBulkSetArtist">Set artist</button>
                <select id="mediaBulkOriginType">
                  <option value="">Origin type</option>
                  <option value="Artifact">Artifact</option>
                  <option value="Rite">Rite</option>
                  <option value="Contest">Contest</option>
                  <option value="Tarot">Tarot</option>
                  <option value="Bingo">Bingo</option>
                  <option value="Gallery">Gallery</option>
                </select>
                <button id="mediaBulkSetOrigin">Set origin</button>
                  <input id="mediaBulkLabel" placeholder="Origin label">
                  <button id="mediaBulkApplyLabel">Set label</button>
                  <button class="btn-ghost" id="mediaBulkClearLabel">Clear label</button>
                </div>
                <div class="status" id="mediaLibraryStatus">Library idle.</div>
                <div class="preview-grid" id="mediaLibraryGrid"></div>
              </div>
          </div>
        </section>
        <div class="modal" id="contestChannelModal">
          <div class="modal-card">
            <div class="modal-header">
              <div class="modal-title">Create Contest Channel</div>
              <button class="btn-ghost" id="contestChannelClose">Close</button>
            </div>
            <div class="row">
              <div>
                <label>Category</label>
                <div class="status" id="contestCategoryStatus">1239558949351460904</div>
              </div>
              <div>
                <label for="contestTemplateChannel">Template channel</label>
                <select id="contestTemplateChannel"></select>
              </div>
            </div>
            <div class="row">
              <div>
                <label for="contestEmojiSelect">Channel emoji</label>
                <select id="contestEmojiSelect">
                  <option value="ðŸŽƒ">ðŸŽƒ</option>
                  <option value="ðŸŒ²">ðŸŒ²</option>
                  <option value="ðŸ”®">ðŸ”®</option>
                  <option value="âœ¨">âœ¨</option>
                  <option value="ðŸ‚">ðŸ‚</option>
                </select>
              </div>
              <div>
                <label for="contestChannelName">Channel name</label>
                <input id="contestChannelName" placeholder="elfoween">
              </div>
            </div>
            <div class="row">
              <div>
                <label>Preview</label>
                <div class="status" id="contestChannelPreview">ðŸŽƒï¸±elfoween</div>
              </div>
              <div>
                <label>&nbsp;</label>
                <button id="contestChannelCreate">Create channel</button>
              </div>
            </div>
            <div class="status" id="contestChannelStatus">Ready.</div>
          </div>
        </div>

      </div>
      </main>
    </div>
    <div class="modal" id="bCreateModal">
      <div class="modal-card">
        <div class="modal-header">
          <div class="modal-title">Create Bingo Game</div>
          <button class="btn-ghost" id="bCloseCreate">Close</button>
        </div>
        <div class="row">
          <div>
            <label for="bTitle">Title</label>
            <input id="bTitle" placeholder="Bingo Night">
          </div>
          <div>
            <label for="bHeader">Header</label>
            <input id="bHeader" placeholder="BING" maxlength="4">
          </div>
          <div>
            <label for="bPrice">Price</label>
            <input id="bPrice" type="number" value="10000">
          </div>
          <div>
            <label for="bCurrency">Currency</label>
            <input id="bCurrency" value="gil">
          </div>
            <div>
              <label for="bMaxCards">Max cards</label>
              <input id="bMaxCards" type="number" value="10">
            </div>
            <div>
              <label for="bSeedPot">Seed pot</label>
              <input id="bSeedPot" type="number" value="0" min="0">
            </div>
          </div>
        <div class="row">
          <div>
            <label for="bChannelSelect">Channel list</label>
            <select id="bChannelSelect"></select>
          </div>
          <div>
            <label>&nbsp;</label>
            <button class="menu-refresh" id="bChannelRefresh" title="Refresh channels" aria-label="Refresh channels">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 5a7 7 0 1 1-6.65 9H3a9 9 0 1 0 2.64-6.36L3 6v6h6l-2.55-2.55A7 7 0 0 1 12 5z"/>
              </svg>
            </button>
          </div>
        </div>
        <input id="bChannel" type="hidden">
        <input id="bCreatedBy" type="hidden">
        <div class="row">
          <div>
            <label for="bAnnounceCalls">
              <input type="checkbox" id="bAnnounceCalls">
              Announce calls in Discord
            </label>
          </div>
          <div>
            <label for="bTheme">Theme color</label>
            <input id="bTheme" type="color" value="#9de07d">
          </div>
          <div>
            <label>Background image</label>
            <button class="btn-ghost icon-btn" id="bCreateBgLibrary" title="Choose from library">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 5h16a1 1 0 0 1 1 1v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1zm0 2v10h15a0 0 0 0 0 0 0V7H4zm3 8 3-4 3 3 2-2 4 5H7z"/>
              </svg>
            </button>
          </div>
          <div>
            <label>&nbsp;</label>
            <button id="bCreate">Create</button>
          </div>
        </div>
        <div class="status" id="bCreateBgStatus">No background selected.</div>
        <div class="status" id="bCreatePayload">Payload preview: channel_id=?, created_by=?</div>
      </div>
    </div>
    <div class="modal" id="bOwnerModal">
      <div class="modal-card modal-card--wide">
        <div class="modal-header">
          <div class="modal-title">Player Cards</div>
          <button class="btn-ghost" id="bOwnerClose">Close</button>
        </div>
        <div class="context-header" id="bOwnerSummary">
          <div>
            <div class="context-path">Viewing cards for: -</div>
            <div class="context-meta">Total cards: 0</div>
          </div>
          <div class="context-meta owner-filter" id="bOwnerLegend">
            <button class="owner-filter-btn" id="bOwnerFilterCalled" type="button">Called (0)</button>
            <button class="owner-filter-btn" id="bOwnerFilterUncalled" type="button">Uncalled (0)</button>
          </div>
        </div>
        <div class="owner-card-list" id="bOwnerCards">No tickets loaded.</div>
      </div>
    </div>
    <div class="modal" id="bPurchaseModal">
      <div class="modal-card">
        <div class="modal-header">
          <div class="modal-title">Player Link</div>
          <button class="btn-ghost" id="bPurchaseClose">Close</button>
        </div>
        <div class="row">
          <div>
            <label for="bPurchaseLink">Player link</label>
            <input id="bPurchaseLink" readonly>
          </div>
          <div>
            <label>&nbsp;</label>
            <button class="btn-ghost" id="bPurchaseCopy">Copy link</button>
          </div>
        </div>
        <div class="status" id="bPurchaseStatus">Ready.</div>
      </div>
    </div>
    <div class="modal" id="uploadLibraryModal">
      <div class="modal-card">
        <div class="modal-header">
          <div class="modal-title" id="uploadLibraryTitle">Image Library</div>
          <button class="btn-ghost" id="uploadLibraryClose">Close</button>
        </div>
        <div class="library-layout">
          <section class="library-upload">
            <div class="library-section-title">Add new media</div>
            <div class="upload-drop" id="uploadLibraryDrop" role="button" tabindex="0">
              <div class="upload-drop-title" id="uploadLibraryDropTitle">Drag &amp; drop an image</div>
              <div class="upload-drop-meta" id="uploadLibraryDropMeta">PNG, JPG, GIF, WEBP</div>
              <div class="upload-drop-cta" id="uploadLibraryDropCta">or click to choose</div>
            </div>
            <input id="uploadLibraryFile" type="file" accept="image/*" class="hidden">
            <div>
              <label for="uploadLibraryTitleInput">Title</label>
              <input id="uploadLibraryTitleInput" placeholder="Image title">
            </div>
            <div>
              <label for="uploadLibraryArtist">Artist</label>
              <select id="uploadLibraryArtist"></select>
            </div>
            <button id="uploadLibraryUpload" disabled>Upload</button>
            <div class="status" id="uploadLibraryStatus">Ready.</div>
          </section>
          <section class="library-browser">
            <div class="library-section-title">Existing media</div>
            <div class="library-toolbar">
              <button class="btn-ghost" id="uploadLibraryRefresh">Refresh</button>
            </div>
            <div class="library-grid-scroll">
              <div class="preview-grid" id="uploadLibraryGrid"></div>
            </div>
          </section>
        </div>
      </div>
    </div>
    <div class="modal" id="deckCreateModal">
      <div class="modal-card">
        <div class="modal-header">
          <div class="modal-title">Create Deck</div>
          <button class="btn-ghost" id="deckCreateClose">Close</button>
        </div>
        <div class="row">
          <div>
            <label for="deckCreateId">Deck ID</label>
            <input id="deckCreateId" placeholder="elf-classic">
          </div>
          <div>
            <label for="deckCreateName">Name</label>
            <input id="deckCreateName" placeholder="Elf Classic">
          </div>
          <div>
            <label for="deckCreateTheme">Card theme</label>
            <select id="deckCreateTheme">
              <option value="classic">Classic</option>
              <option value="wood">Wood</option>
              <option value="neon">Neon</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div>
            <label>Deck back</label>
            <button class="btn-ghost icon-btn" id="deckCreateBackPick" title="Choose back image">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 5h16a1 1 0 0 1 1 1v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1zm0 2v10h15a0 0 0 0 0 0 0V7H4zm3 8 3-4 3 3 2-2 4 5H7z"/>
              </svg>
            </button>
          </div>
          <div>
            <label>Back preview</label>
            <div class="preview-card" id="deckCreateBackPreview"><span class="preview-label">Back</span></div>
          </div>
          <div>
            <label for="deckCreateSeed">Seed cards</label>
            <select id="deckCreateSeed">
              <option value="none">None</option>
              <option value="dummy">Dummy per suit</option>
              <option value="default">Default seed</option>
            </select>
          </div>
          <div>
            <label for="deckCreatePerHouse">Per suit</label>
            <input id="deckCreatePerHouse" type="number" value="4" min="0">
          </div>
          <div>
            <label for="deckCreateCrown">Crown</label>
            <input id="deckCreateCrown" type="number" value="1" min="0">
          </div>
        </div>
        <div class="row">
          <div>
            <label>&nbsp;</label>
            <button id="deckCreateSubmit">Create deck</button>
          </div>
        </div>
        <div class="section-divider"></div>
        <h3>Suit Themes</h3>
        <div class="row">
          <div>
            <label for="deckCreateSuitPreset">Suit preset</label>
            <select id="deckCreateSuitPreset">
              <option value="forest">Forest (Roots/Canopy/Ember/Whisper/Crown)</option>
              <option value="tarot">Tarot (Major/Wands/Cups/Swords/Pentacles)</option>
              <option value="playing">Playing Cards (Hearts/Spades/Clubs/Diamonds)</option>
              <option value="custom">Custom</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div>
            <label for="deckCreateSuitJson">Suit definitions (JSON)</label>
            <textarea id="deckCreateSuitJson" rows="6" placeholder='[{"id":"Roots","name":"Roots","themes":{"foundation":3,"memory":2,"stability":3},"keywords":["home","tradition","endurance","belonging"]}]'></textarea>
          </div>
        </div>
      </div>
    </div>
    <div class="modal" id="deckEditModal">
      <div class="modal-card">
        <div class="modal-header">
          <div class="modal-title">Edit Deck</div>
          <button class="btn-ghost" id="deckEditClose">Close</button>
        </div>
        <div class="row">
          <div>
            <label for="deckEditName">Name</label>
            <input id="deckEditName" placeholder="Elf Classic">
          </div>
          <div>
            <label for="deckEditTheme">Card theme</label>
            <select id="deckEditTheme">
              <option value="classic">Classic</option>
              <option value="wood">Wood</option>
              <option value="neon">Neon</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div>
            <label>Deck back</label>
            <button class="btn-ghost icon-btn" id="deckEditBackPick" title="Choose back image">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 5h16a1 1 0 0 1 1 1v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1zm0 2v10h15a0 0 0 0 0 0 0V7H4zm3 8 3-4 3 3 2-2 4 5H7z"/>
              </svg>
            </button>
          </div>
          <div>
            <label>Back preview</label>
            <div class="preview-card" id="deckEditBackPreview"><span class="preview-label">Back</span></div>
          </div>
        </div>
        <div class="row">
          <div>
            <label>&nbsp;</label>
            <label><input type="checkbox" id="deckEditHideGallery"> Hide this deck from the gallery</label>
          </div>
        </div>
        <div class="row">
          <div>
            <label>&nbsp;</label>
            <button id="deckEditSubmit">Save changes</button>
          </div>
        </div>
        <div class="section-divider"></div>
        <h3>Suit Themes</h3>
        <div class="row">
          <div>
            <label for="deckEditSuitPreset">Suit preset</label>
            <select id="deckEditSuitPreset">
              <option value="forest">Forest (Roots/Canopy/Ember/Whisper/Crown)</option>
              <option value="tarot">Tarot (Major/Wands/Cups/Swords/Pentacles)</option>
              <option value="playing">Playing Cards (Hearts/Spades/Clubs/Diamonds)</option>
              <option value="custom">Custom</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div>
            <label for="deckEditSuitJson">Suit definitions (JSON)</label>
            <textarea id="deckEditSuitJson" rows="6" placeholder='[{"id":"Roots","name":"Roots","themes":{"foundation":3,"memory":2,"stability":3},"keywords":["home","tradition","endurance","belonging"]}]'></textarea>
          </div>
        </div>
      </div>
    </div>
    <div class="modal" id="sessionCreateModal">
      <div class="modal-card">
        <div class="modal-header">
          <div class="modal-title">Create Session</div>
          <button class="btn-ghost" id="sessionCreateClose">Close</button>
        </div>
        <div class="row">
          <div>
            <label for="sessionCreateDeck">Deck</label>
            <select id="sessionCreateDeck"></select>
          </div>
          <div>
            <label for="sessionCreateSpread">Spread</label>
            <select id="sessionCreateSpread">
              <option value="single">Single</option>
              <option value="tree">Tree</option>
              <option value="cross">Cross</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div>
            <label>&nbsp;</label>
            <button id="sessionCreateSubmit">Create session</button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal" id="mediaModal">
      <div class="modal-card">
        <div class="modal-header">
          <div class="modal-title">Media Management</div>
          <button class="btn-ghost" id="mediaClose">Close</button>
        </div>
        <div class="row">
          <div>
            <label>&nbsp;</label>
            <button class="btn-ghost icon-btn" id="mediaLibraryOpen" title="Open library">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 5h16a1 1 0 0 1 1 1v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1zm0 2v10h15a0 0 0 0 0 0 0V7H4zm3 8 3-4 3 3 2-2 4 5H7z"/>
              </svg>
            </button>
          </div>
          <div class="muted" style="align-self:center">Upload and select images from the library.</div>
        </div>
      </div>
    </div>
    <div class="modal" id="artistModal">
      <div class="modal-card">
        <div class="modal-header">
          <div class="modal-title">Artist Index</div>
          <button class="btn-ghost" id="artistClose">Close</button>
        </div>
        <div class="row">
          <div>
            <label for="artistIndexSelect">Artist list</label>
            <select id="artistIndexSelect"></select>
          </div>
          <div>
            <label>&nbsp;</label>
            <button class="btn-ghost" id="artistIndexRefresh">Refresh</button>
          </div>
        </div>
        <div class="row">
          <div>
            <label for="artistIndexId">Artist ID (optional)</label>
            <input id="artistIndexId" placeholder="artist_id">
          </div>
          <div>
            <label for="artistIndexName">Name</label>
            <input id="artistIndexName" placeholder="Artist name">
          </div>
        </div>
        <div class="row">
          <div>
            <label for="artistIndexInstagram">Instagram</label>
            <input id="artistIndexInstagram" placeholder="https://instagram.com/...">
          </div>
          <div>
            <label for="artistIndexBluesky">Bluesky</label>
            <input id="artistIndexBluesky" placeholder="https://bsky.app/profile/...">
          </div>
          <div>
            <label for="artistIndexX">X / Twitter</label>
            <input id="artistIndexX" placeholder="https://x.com/...">
          </div>
          <div>
            <label for="artistIndexArtstation">ArtStation</label>
            <input id="artistIndexArtstation" placeholder="https://artstation.com/...">
          </div>
        </div>
          <div class="row">
            <div>
              <label for="artistIndexWebsite">Website</label>
              <input id="artistIndexWebsite" placeholder="https://...">
            </div>
            <div>
              <label for="artistIndexLinktree">Linktree</label>
              <input id="artistIndexLinktree" placeholder="https://linktr.ee/...">
            </div>
          </div>
          <div class="row">
            <div>
              <label>&nbsp;</label>
              <button id="artistIndexSave">Save artist</button>
            </div>
            <div>
              <label>&nbsp;</label>
              <button class="btn-ghost" id="artistIndexDelete">Delete artist</button>
            </div>
          </div>
      </div>
    </div>
    <div class="modal" id="calendarModal">
      <div class="modal-card">
        <div class="modal-header">
          <div class="modal-title">Forest Calendar</div>
          <button class="btn-ghost" id="calendarClose">Close</button>
        </div>
        <div class="row">
          <div>
            <label for="calendarMonth">Month</label>
            <select id="calendarMonth"></select>
          </div>
          <div>
            <label for="calendarTitle">Title</label>
            <input id="calendarTitle" placeholder="Optional title">
          </div>
        </div>
        <div class="row">
          <div>
            <label>Artist</label>
            <div class="status" id="calendarArtist">Forest</div>
          </div>
        </div>
        <div class="row">
          <button class="btn-ghost" id="calendarPick">Pick from library</button>
          <button id="calendarSave">Save month</button>
          <button class="btn-ghost" id="calendarClear">Clear month</button>
          <button class="btn-ghost" id="calendarRefresh">Refresh</button>
        </div>
        <div class="row">
          <div>
            <label>Preview</label>
            <div class="preview-card" id="calendarPreview"></div>
          </div>
        </div>
        <div class="status" id="calendarStatus">Ready.</div>
      </div>
    </div>
    <div class="modal" id="galleryModal">
      <div class="modal-card modal-card--wide">
        <div class="modal-header">
          <div class="modal-title">Image Uploader</div>
          <button class="btn-ghost" id="galleryClose">Close</button>
        </div>
        <h3>Upload Channel</h3>
        <div class="row">
          <div>
            <label for="galleryUploadChannel">Upload channel</label>
            <select id="galleryUploadChannel"></select>
          </div>
          <div>
            <label>&nbsp;</label>
            <button class="btn-ghost" id="galleryChannelRefresh">Refresh channels</button>
          </div>
          <div>
            <label>&nbsp;</label>
            <button id="galleryChannelSave">Save channel</button>
          </div>
        </div>
        <div class="row">
          <div>
            <label for="galleryChannelName">Create channel name</label>
            <input id="galleryChannelName" placeholder="forest-gallery-uploads">
          </div>
          <div>
            <label for="galleryChannelCategory">Category ID</label>
            <input id="galleryChannelCategory" placeholder="1234567890">
          </div>
          <div>
            <label for="galleryChannelTemplate">Template channel</label>
            <select id="galleryChannelTemplate"></select>
          </div>
          <div>
            <label>&nbsp;</label>
            <button class="btn-ghost" id="galleryChannelCreate">Create channel</button>
          </div>
        </div>
        <div class="status" id="galleryChannelStatus">Pick a channel to use for uploads.</div>
        <div class="section-divider"></div>
        <div class="row">
          <div>
            <label>&nbsp;</label>
            <button class="btn-ghost" id="galleryImportOpen">Import from Discord channel</button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal" id="galleryImportModal">
      <div class="modal-card">
        <div class="modal-header">
          <div class="modal-title">Import Gallery Images</div>
          <button class="btn-ghost" id="galleryImportClose">Close</button>
        </div>
        <div class="row">
          <div>
            <label for="galleryImportChannel">Source channel</label>
            <select id="galleryImportChannel"></select>
          </div>
          <div>
            <label>&nbsp;</label>
            <button class="btn-ghost" id="galleryImportRefresh">Refresh channels</button>
          </div>
        </div>
        <div class="row">
          <div>
            <label for="galleryImportOriginType">Origin type</label>
            <select id="galleryImportOriginType">
              <option value="Artifact">Artifact</option>
              <option value="Rite">Rite</option>
              <option value="Contest">Contest</option>
              <option value="Tarot">Tarot</option>
              <option value="Bingo">Bingo</option>
              <option value="Gallery">Gallery</option>
            </select>
          </div>
          <div>
            <label for="galleryImportOriginLabel">Origin label</label>
            <input id="galleryImportOriginLabel" placeholder="Offered during...">
          </div>
        </div>
        <div class="row">
          <div>
            <label>&nbsp;</label>
            <button id="galleryImportRun">Import images</button>
          </div>
        </div>
        <div class="status" id="galleryImportStatus">Pick a channel to import.</div>
      </div>
    </div>
    <div class="modal" id="authRolesModal">
      <div class="modal-card">
        <div class="modal-header">
          <div class="modal-title">Auth Roles</div>
          <button class="btn-ghost" id="authRolesClose">Close</button>
        </div>
        <div class="row">
          <div>
            <label>&nbsp;</label>
            <button class="btn-ghost" id="authRolesRefresh">Refresh roles</button>
          </div>
          <div class="muted" style="align-self:center">Select scopes each role can reach via /auth.</div>
        </div>
        <div class="role-table-wrap" id="authRolesWrap">
          <div class="list" id="authRolesList">No roles loaded.</div>
        </div>
        <div class="row">
          <div>
            <label for="authRoleIds">Selected role IDs</label>
            <input id="authRoleIds" readonly>
          </div>
          <div>
            <label>&nbsp;</label>
            <button id="authRolesSave">Save</button>
          </div>
        </div>
        <div class="status" id="authRolesStatus">Ready.</div>
      </div>
    </div>
    <div class="modal" id="authTokensModal">
      <div class="modal-card">
        <div class="modal-header">
          <div class="modal-title">Auth Keys</div>
          <button class="btn-ghost" id="authTokensClose">Close</button>
        </div>
        <div class="row">
          <div>
            <label>&nbsp;</label>
            <button class="btn-ghost" id="authTokensRefresh">Refresh keys</button>
          </div>
          <div class="muted" style="align-self:center">Active web tokens and remaining lifetime.</div>
        </div>
        <div class="role-table-wrap" id="authTokensWrap">
          <div class="list" id="authTokensList">No keys loaded.</div>
        </div>
        <div class="status" id="authTokensStatus">Ready.</div>
      </div>
    </div>
    <div class="modal" id="authTempModal">
      <div class="modal-card">
        <div class="modal-header">
          <h3>Temporary Access Link</h3>
          <button class="btn-ghost" id="authTempClose">Close</button>
        </div>
        <div class="modal-content">
          <div class="form-row">
            <label for="authTempRole">Access profile (role scope)</label>
            <select id="authTempRole"></select>
            <div class="muted auth-temp-scopes" id="authTempScopesPreview"></div>
          </div>
          <div class="form-row">
            <label for="authTempScopes">Scopes override (optional, comma separated)</label>
            <input id="authTempScopes" placeholder="bingo:admin, tarot:admin">
          </div>
          <div class="form-row">
            <button id="authTempGenerate">Generate 6 hour link</button>
          </div>
          <div class="form-row">
            <label for="authTempUrl">Temporary link</label>
            <input id="authTempUrl" readonly>
            <button class="btn-ghost" id="authTempCopy" type="button">Copy link</button>
          </div>
          <div class="muted">Link is single-use. The session lasts 6 hours after activation.</div>
        </div>
        <div class="status" id="authTempStatus">Ready.</div>
      </div>
    </div>
    <div class="toast-stack" id="toastStack"></div>
    <script src="/static/overlay/overlay.js" defer></script>
  </body>
</html>


































